
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>5.zephyr目录结构</title>
<style>
body { margin: 0; padding: 0; font-family: sans-serif; background: #f5f5f5; }
#wrapper { max-width: 950px; margin: 0 auto; padding-right: 300px; }
#content {
    background: #fff;
    padding: 40px;
    min-height: 100vh;
    box-shadow: 0 2px 14px #eee;
}
#content img {
    display: block;
    margin: 24px auto;
    max-width: 100%;
    height: auto;
    box-shadow: 0 4px 12px #eee;
    background: #fff;
}
#content pre {
    background: #fafbfc;
    border-radius: 6px;
    padding: 16px;
    margin: 20px 0;
    overflow-x: auto;
    font-size: 16px;
}
#content pre:empty {
    display: none;
}
#content div:empty {
    min-height: 0 !important;
    background: none !important;
}
#toc {
    position: fixed;
    top: 0;
    right: 0;
    width: 270px;
    height: 100vh;
    overflow-y: auto;
    background: #f8f8f8;
    border-left: 1px solid #e0e0e0;
    padding: 32px 16px 32px 24px;
    box-shadow: -3px 0 7px 0 #eee;
    z-index: 100;
}
#toc ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}
#toc ul ul {
    padding-left: 18px;
    border-left: 2px solid #e0e0e0;
    margin-left: 8px;
}
#toc li {
    margin-bottom: 3px;
}
#toc a {
    color: #222;
    text-decoration: none;
    font-size: 15px;
    transition: color 0.2s;
}
#toc a:hover {
    color: #1a73e8;
}
@media (max-width: 1200px) {
    #toc { display: none; }
    #wrapper { padding-right: 0; }
}
</style>
</head>
<body>
<div id="wrapper">
    <div id="content">
        <h2 id="zephyr">zephyr 目录结构</h2>
<pre><code>|-- arch
|-- boards
|-- build
|-- cmake
|-- doc
|-- drivers
|-- dts
|-- include
|-- kernel
|-- lib
|-- misc
|-- modules
|-- samples
|-- scripts
|-- share
|-- snippets
|-- soc
|-- submanifests
|-- subsys
|-- tests

</code></pre>
<h2 id="arch"><strong>arch/</strong></h2>
<p>存放与处理器架构相关的代码，每个处理器架构都有一个独立的子目录，如 <code>arm/</code>、<code>x86/</code>、<code>riscv/</code> 等，包括启动代码、汇编逻辑、上下文切换、架构特定的内核接口实现等。  </p>
<ul>
<li>支持架构如下</li>
</ul>
<p><img alt="image-20250412214629817" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214629817.png" /></p>
<h2 id="boards"><strong>boards/</strong></h2>
<p>存放板级支持包（BSP），为不同开发板提供对应的配置、引脚定义、设备树（或设备树片段）、编译选项等。</p>
<ul>
<li>每块板都有一个单独的目录，其下包含 <code>Kconfig</code>、<code>defconfig</code>、<code>board.cmake</code>、<code>dts</code> 等，用于描述硬件资源、编译参数和引导流程。</li>
</ul>
<p>一些是芯片厂商的的测试板，一些是第三方的板</p>
<p>以一个board为例，定义文件如下</p>
<p><img alt="image-20250412214237307" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214237307.png" /></p>
<h2 id="build"><strong>build/</strong></h2>
<p>通常是编译生成的中间文件和最终产物输出目录（编译后产生的目录，默认由 CMake 生成）。</p>
<ul>
<li>在 Zephyr 的示例工程或应用工程中，最好在工程的根目录之外或指定位置创建 <code>build/</code> 文件夹，用于存放临时对象文件和最终的可执行/镜像文件，避免污染源码。</li>
</ul>
<h2 id="cmake"><strong>cmake/</strong></h2>
<p>Zephyr 的 CMake 脚本和模块集合，包含构建系统的核心逻辑、工具链配置、编译规则等。</p>
<ul>
<li>用于设置各个架构的编译选项、生成最终镜像或库文件所需要的脚本。</li>
</ul>
<h2 id="doc"><strong>doc/</strong></h2>
<p>存放 Zephyr 官方文档的源文件（通常使用 reStructuredText / Sphinx 进行生成）。</p>
<ul>
<li>包括用户指南、API 文档、开发者手册、教程示例等。</li>
</ul>
<h2 id="drivers"><strong>drivers/</strong></h2>
<p>存放各种硬件外设驱动，包括 UART、SPI、I2C、GPIO、闪存、传感器等设备的驱动实现。</p>
<ul>
<li>通常以功能或总线进行分类，如 <code>sensor/</code>、<code>serial/</code>、<code>gpio/</code> 等，代码中实现设备抽象层 (HAL) 或更上层的驱动接口。</li>
</ul>
<p><img alt="image-20250412214556197" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214556197.png" /></p>
<h2 id="dts"><strong>dts/</strong></h2>
<p>存放公用的设备树文件片段（Device Tree Sources），用于描述硬件资源、外设信息。</p>
<ul>
<li>Zephyr 采用 Devicetree 来配置设备与驱动，通过 <code>dts/</code> 下的 <code>.dtsi</code> 文件与 <code>boards/</code> 下的特定文件结合，最终生成编译所需的头文件。</li>
</ul>
<h2 id="include"><strong>include/</strong></h2>
<p>Zephyr 的公共头文件目录，供内核、子系统以及应用使用。</p>
<ul>
<li>包含各种公共 API、内核定义、内置宏和常量等，如 <code>kernel.h</code>、<code>device.h</code>、<code>sys/</code> 等子目录。</li>
</ul>
<h2 id="kernel"><strong>kernel/</strong></h2>
<p>Zephyr 内核的核心部分，包括任务调度、线程管理、内存管理、同步机制、中断管理等核心模块的实现。</p>
<ul>
<li>这里是整个操作系统的最基础逻辑，决定了 Zephyr 的实时性和多任务能力。</li>
</ul>
<h2 id="lib"><strong>lib/</strong></h2>
<p>系统或第三方通用功能的库文件，如 C 标准库的部分实现、数学库、字符串处理等。</p>
<ul>
<li>通常是与硬件无关的通用功能集合，可以被内核、驱动和应用统一使用。</li>
</ul>
<p><img alt="image-20250412214451183" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214451183.png" /></p>
<h2 id="misc"><strong>misc/</strong></h2>
<p>存放一些零散的、难以归类或通用的脚本、工具或示例配置文件（在后续版本中有可能会调整或合并到更合适的位置）。</p>
<h2 id="modules"><strong>modules/</strong></h2>
<p>存放与 Zephyr 集成的外部组件或子模块（例如其他开源库、第三方协议栈等）。</p>
<ul>
<li>通过 <code>west</code> 或者 Git submodule 引入的组件，通常在此进行统一管理和配置。</li>
</ul>
<p><img alt="image-20250412214706857" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214706857.png" /></p>
<h2 id="samples"><strong>samples/</strong></h2>
<p>Zephyr 提供的官方示例代码，用于演示各种功能、子系统和驱动的使用方式。</p>
<ul>
<li>目录下通常按功能或主题进行分类，例如 <code>hello_world/</code>、<code>basic/</code>、<code>bluetooth/</code>、<code>drivers/</code> 等。</li>
</ul>
<p><img alt="image-20250412214745549" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214745549.png" /></p>
<h2 id="scripts"><strong>scripts/</strong></h2>
<p>存放构建、测试、代码检查等相关脚本，以及一些辅助性的 Python 工具、CMake 扩展脚本等。</p>
<h2 id="share"><strong>share/</strong></h2>
<p>一些共享资源文件或工具所需要的附加资源（可能包含文档、脚本或示例工程文件），供 Zephyr 内部或外部工具使用。</p>
<h2 id="snippets"><strong>snippets/</strong></h2>
<p>存放代码片段或演示片段，一般用于文档示例或短小的功能演示。</p>
<h2 id="soc"><strong>soc/</strong></h2>
<p>与 SoC (System on Chip) 相关的代码，比如特定厂商或特定系列芯片的初始化、时钟配置、寄存器定义等。</p>
<ul>
<li>该目录下会细分不同厂商（如 <code>nxp/</code>、<code>stm32/</code> 等），每个厂商再细分不同系列和具体 SoC。</li>
</ul>
<h2 id="submanifests"><strong>submanifests/</strong></h2>
<p>存放 Zephyr 中一些依赖或子模块的 <code>west.yml</code>、<code>manifest.yml</code> 等，管理多仓库的依赖关系。</p>
<ul>
<li>用于 Zephyr 的组件化开发，方便将多个仓库的依赖进行统一的版本管理。</li>
</ul>
<h2 id="subsys"><strong>subsys/</strong></h2>
<p>Zephyr 的各个子系统，比如网络栈 (<code>net/</code>)、蓝牙 (<code>bluetooth/</code>)、电源管理 (<code>pm/</code>)、文件系统 (<code>fs/</code>)   shell 等都在这里实现。</p>
<ul>
<li>每个子系统都包含了它自己的 API、内部逻辑以及与内核的集成。</li>
</ul>
<p><img alt="image-20250412214928223" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250412214928223.png" /></p>
<h2 id="tests"><strong>tests/</strong></h2>
<p>Zephyr 提供的官方测试用例和测试框架，用于验证内核、驱动和各个子系统的功能、性能和稳定性。</p>
<ul>
<li>也包括与 Continuous Integration (CI) 结合的自动测试配置，开发者可以基于这些单元测试或集成测试进行参考或扩展。</li>
</ul>
    </div>
</div>
<div id="toc">
    <div style="font-weight:bold;margin-bottom:12px;">目录</div>
    <div class="toc">
<ul>
<li><a href="#zephyr">zephyr 目录结构</a></li>
<li><a href="#arch">arch/</a></li>
<li><a href="#boards">boards/</a></li>
<li><a href="#build">build/</a></li>
<li><a href="#cmake">cmake/</a></li>
<li><a href="#doc">doc/</a></li>
<li><a href="#drivers">drivers/</a></li>
<li><a href="#dts">dts/</a></li>
<li><a href="#include">include/</a></li>
<li><a href="#kernel">kernel/</a></li>
<li><a href="#lib">lib/</a></li>
<li><a href="#misc">misc/</a></li>
<li><a href="#modules">modules/</a></li>
<li><a href="#samples">samples/</a></li>
<li><a href="#scripts">scripts/</a></li>
<li><a href="#share">share/</a></li>
<li><a href="#snippets">snippets/</a></li>
<li><a href="#soc">soc/</a></li>
<li><a href="#submanifests">submanifests/</a></li>
<li><a href="#subsys">subsys/</a></li>
<li><a href="#tests">tests/</a></li>
</ul>
</div>

</div>
</body>
</html>
