
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>2.Shinobi</title>
<style>
body { margin: 0; padding: 0; font-family: sans-serif; background: #f5f5f5; }
#wrapper { max-width: 950px; margin: 0 auto; padding-right: 300px; }
#content {
    background: #fff;
    padding: 40px;
    min-height: 100vh;
    box-shadow: 0 2px 14px #eee;
}
#content img {
    display: block;
    margin: 24px auto;
    max-width: 100%;
    height: auto;
    box-shadow: 0 4px 12px #eee;
    background: #fff;
}
#content pre {
    background: #fafbfc;
    border-radius: 6px;
    padding: 16px;
    margin: 20px 0;
    overflow-x: auto;
    font-size: 16px;
}
#content pre:empty {
    display: none;
}
#content div:empty {
    min-height: 0 !important;
    background: none !important;
}
#toc {
    position: fixed;
    top: 0;
    right: 0;
    width: 270px;
    height: 100vh;
    overflow-y: auto;
    background: #f8f8f8;
    border-left: 1px solid #e0e0e0;
    padding: 32px 16px 32px 24px;
    box-shadow: -3px 0 7px 0 #eee;
    z-index: 100;
}
#toc ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}
#toc ul ul {
    padding-left: 18px;
    border-left: 2px solid #e0e0e0;
    margin-left: 8px;
}
#toc li {
    margin-bottom: 3px;
}
#toc a {
    color: #222;
    text-decoration: none;
    font-size: 15px;
    transition: color 0.2s;
}
#toc a:hover {
    color: #1a73e8;
}
@media (max-width: 1200px) {
    #toc { display: none; }
    #wrapper { padding-right: 0; }
}
</style>
</head>
<body>
<div id="wrapper">
    <div id="content">
        <p>linux上部署 Shinobi </p>
<p>一键安装脚本</p>
<pre><code>sh &lt;(curl -s https://cdn.shinobi.video/installers/shinobi-install.sh)
</code></pre>
<pre><code>Select your OS
If your OS is not on the list please refer to the docs.
========
1. Ubuntu - Fast and Touchless
2. Ubuntu - Advanced
3. Alma Linux 9.2 / Rocky 9 / CentOS 8 - Fast and Touchless (Red Hat)
4. CentOS
5. MacOS
6. FreeBSD
7. OpenSUSE

</code></pre>
<p>admin@shinobi.video</p>
<p>admin</p>
<pre><code> pm2 list
</code></pre>
<pre><code class="language-c">hdj@newbies:~/video_save$ pm2 list

                        -------------

__/\\\\\\\\\\\\\____/\\\\____________/\\\\____/\\\\\\\\\_____
 _\/\\\/////////\\\_\/\\\\\\________/\\\\\\__/\\\///////\\\___
  _\/\\\_______\/\\\_\/\\\//\\\____/\\\//\\\_\///______\//\\\__
   _\/\\\\\\\\\\\\\/__\/\\\\///\\\/\\\/_\/\\\___________/\\\/___
    _\/\\\/////////____\/\\\__\///\\\/___\/\\\________/\\\//_____
     _\/\\\_____________\/\\\____\///_____\/\\\_____/\\\//________
      _\/\\\_____________\/\\\_____________\/\\\___/\\\/___________
       _\/\\\_____________\/\\\_____________\/\\\__/\\\\\\\\\\\\\\\_
        _\///______________\///______________\///__\///////////////__


                          Runtime Edition

        PM2 is a Production Process Manager for Node.js applications
                     with a built-in Load Balancer.

                Start and Daemonize any application:
                $ pm2 start app.js

                Load Balance 4 instances of api.js:
                $ pm2 start api.js -i 4

                Monitor in production:
                $ pm2 monitor

                Make pm2 auto-boot at server restart:
                $ pm2 startup

                To go further checkout:
                http://pm2.io/


                        -------------

[PM2] Spawning PM2 daemon with pm2_home=/home/hdj/.pm2
[PM2] PM2 Successfully daemonized
┌────┬───────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name      │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
└────┴───────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘

</code></pre>
<h3 id="1-ubuntu-fast-and-touchless"><strong>1. Ubuntu - Fast and Touchless</strong></h3>
<ul>
<li><strong>推荐！</strong></li>
<li>自动检测、自动安装依赖和配置，基本全自动。</li>
<li>安装快、省心，适合大多数用户，尤其是<strong>新手或希望快速部署</strong>。</li>
</ul>
<h3 id="2-ubuntu-advanced"><strong>2. Ubuntu - Advanced</strong></h3>
<ul>
<li>适合有经验用户、需要<strong>手动干预、定制某些参数</strong>的人。</li>
<li>过程中会问你更多问题，比如数据库、目录、自定义选项。</li>
<li>更灵活，但<strong>步骤多、容易出错</strong>。</li>
</ul>
<h3 id="1">1. <strong>更新系统并安装依赖</strong></h3>
<pre><code>sudo apt update
sudo apt install -y git curl build-essential ffmpeg mariadb-server nodejs npm
</code></pre>
<blockquote>
<p>说明：</p>
<ul>
<li><strong>ffmpeg</strong> 是 Shinobi 必须的转码工具。</li>
<li><strong>mariadb-server</strong>（或 mysql-server）作为数据库。</li>
</ul>
</blockquote>
<h3 id="2-shinobi">2. <strong>克隆 Shinobi 源码</strong></h3>
<pre><code>git clone https://gitlab.com/Shinobi-Systems/Shinobi.git shinobi
cd shinobi
</code></pre>
<h3 id="3-nodejs">3. <strong>安装 Node.js 依赖</strong></h3>
<pre><code>sudo npm install
</code></pre>
<h3 id="4">4. <strong>初始化数据库</strong></h3>
<pre><code>sudo mysql -u root -p
</code></pre>
<p>依次输入以下 SQL（可直接复制粘贴，注意分号）：</p>
<pre><code>CREATE DATABASE ccio;
CREATE USER 'shinobi'@'localhost' IDENTIFIED BY 'shinobi';
GRANT ALL PRIVILEGES ON ccio.* TO 'shinobi'@'localhost';
FLUSH PRIVILEGES;
EXIT;
</code></pre>
<blockquote>
<p>数据库名、用户名、密码可根据需求修改，记得与配置文件同步。</p>
</blockquote>
<h3 id="5-shinobi">5. <strong>配置 Shinobi</strong></h3>
<p>复制一份默认配置：</p>
<pre><code>cp conf.sample.json conf.json
</code></pre>
<p>编辑 <code>conf.json</code>（如 nano conf.json），配置数据库账号密码等（与上面 SQL 保持一致）。</p>
<h3 id="6-shinobi">6. <strong>启动 Shinobi</strong></h3>
<pre><code>sudo node ./camera.js
</code></pre>
<p>首次启动，命令行会输出管理员初始账号（默认用户名：admin@shinobi.video，密码：admin）。</p>
<h3 id="7-web">7. <strong>访问 Web 界面</strong></h3>
<p>浏览器访问：</p>
<pre><code>http://&lt;你的Linux主机IP&gt;:8080
</code></pre>
<p>使用默认账号登录，开始配置摄像头。</p>
    </div>
</div>
<div id="toc">
    <div style="font-weight:bold;margin-bottom:12px;">目录</div>
    <div class="toc">
<ul>
<li><a href="#1-ubuntu-fast-and-touchless">1. Ubuntu - Fast and Touchless</a></li>
<li><a href="#2-ubuntu-advanced">2. Ubuntu - Advanced</a></li>
<li><a href="#1">1. 更新系统并安装依赖</a></li>
<li><a href="#2-shinobi">2. 克隆 Shinobi 源码</a></li>
<li><a href="#3-nodejs">3. 安装 Node.js 依赖</a></li>
<li><a href="#4">4. 初始化数据库</a></li>
<li><a href="#5-shinobi">5. 配置 Shinobi</a></li>
<li><a href="#6-shinobi">6. 启动 Shinobi</a></li>
<li><a href="#7-web">7. 访问 Web 界面</a></li>
</ul>
</div>

</div>
</body>
</html>
