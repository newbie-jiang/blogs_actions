使用github api 分析zephyr仓库中的数据

1.获取sampel目录中的所有nrf52840dk_nrf52840.overlay 文件包含在哪些测试单元，将结果输出到  nrf52840dk_paths.txt

- 见脚本get_zephyr_sample.py     （递归 REST API 方式遍历目录，请求多且慢）

2.上述方式会发起多次请求，github的请求数是有限制的，因此要限制速度，并且此种方式较慢,于是使用下面方式

- 见脚本get_zephyr_sample_tree.py

用 **GitHub Git 树接口（Git Data API）**，一次请求获取整个仓库文件树（目录结构和所有文件路径），再在本地过滤目标文件。这样极大减少请求次数，仅需 3 次请求（获取分支 → 获取commit → 获取树）

3.使用GitHub Git树接口递归获取 `zephyr` 仓库 `samples` 目录下所有 `.overlay` 文件，统计每个文件名出现次数，并保存到 `overlay_counts.txt`

- 见脚本overlay_counts.py

4.使用GitHub Git树接口递归获取 `zephyr` 仓库 `samples` 目录下所有 `.conf` 文件，统计每个文件名出现次数，并保存到 `conf_counts.txt`

- 见脚本conf_counts.py

**文件区分**

在 Zephyr 的 `samples` 目录下，**如果某个测试单元（sample）目录中存在针对某开发板（如 `boarda`）的 `.conf` 文件或 `.overlay` 文件，一般可以认为该测试单元支持该开发板，但具体还需结合上下文判断**。具体原因和说明如下：

------

1. `.conf` 文件和 `.overlay` 文件的作用

- **`boarda.conf`**：包含该测试单元针对 `boarda` 板的 Kconfig 配置，定义启用或禁用的功能、参数等软件配置。
- **`boarda.overlay`**：包含该测试单元针对 `boarda` 板的设备树覆盖，定义硬件资源的具体映射和调整。

------

2. 只要存在其中一个文件，是否代表支持？

- **存在 `boarda.conf`**：说明测试单元针对 `boarda` 进行了软件层面的配置支持。通常意味着在该板上可以编译和运行，但可能还需要 `.overlay` 配置确保硬件匹配。
- **存在 `boarda.overlay`**：说明测试单元针对 `boarda` 进行了硬件设备树配置支持，确保硬件资源正确。如果没有对应 `.conf`，默认可能继承通用配置。
- **只要存在任意一个，一般表明该测试单元**至少部分支持**该板**，因为：
  - `.conf` 影响软件功能选择
  - `.overlay` 影响硬件资源绑定
  - 两者缺一不可的情况较少，往往至少有一份配置文件表明支持。

------

3. 具体判断还需注意

- **是否有默认或全局配置**：有些测试单元可能没有为某板专门提供 `.conf` 或 `.overlay`，但可以继承通用配置和设备树，也算支持。
- **`prj.conf` 或其他配置文件**：测试单元根目录或上层目录的配置可能也影响支持情况。
- **文档和 README**：官方文档或示例说明中通常会列出支持的开发板。
- **编译能否成功**：真正检验支持与否最直接的方法是尝试用该板配置编译成功。

------

4. 总结

| 情况                     | 是否支持测试单元   | 说明                           |
| ------------------------ | ------------------ | ------------------------------ |
| 有 `boarda.conf` 文件    | 一般支持           | 软件层面配置，板级定制         |
| 有 `boarda.overlay` 文件 | 一般支持           | 硬件层面定制，确保资源正确映射 |
| 两者均有                 | 明确支持           | 软件和硬件均为该板定制         |
| 两者均无，但有通用配置   | 可能支持           | 继承默认配置，需要测试确认     |
| 以上都无                 | 不支持或需自行移植 | 没有针对该板的专门支持         |