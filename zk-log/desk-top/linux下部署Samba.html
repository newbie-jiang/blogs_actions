
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>linux下部署Samba</title>
<style>
body { margin: 0; padding: 0; font-family: sans-serif; background: #f5f5f5; }
#wrapper { max-width: 950px; margin: 0 auto; padding-right: 300px; }
#content {
    background: #fff;
    padding: 40px;
    min-height: 100vh;
    box-shadow: 0 2px 14px #eee;
}
#content img {
    display: block;
    margin: 24px auto;
    max-width: 100%;
    height: auto;
    box-shadow: 0 4px 12px #eee;
    background: #fff;
}
#content pre {
    background: #fafbfc;
    border-radius: 6px;
    padding: 16px;
    margin: 20px 0;
    overflow-x: auto;
    font-size: 16px;
}
#content pre:empty {
    display: none;
}
#content div:empty {
    min-height: 0 !important;
    background: none !important;
}
#toc {
    position: fixed;
    top: 0;
    right: 0;
    width: 270px;
    height: 100vh;
    overflow-y: auto;
    background: #f8f8f8;
    border-left: 1px solid #e0e0e0;
    padding: 32px 16px 32px 24px;
    box-shadow: -3px 0 7px 0 #eee;
    z-index: 100;
}
#toc ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}
#toc ul ul {
    padding-left: 18px;
    border-left: 2px solid #e0e0e0;
    margin-left: 8px;
}
#toc li {
    margin-bottom: 3px;
}
#toc a {
    color: #222;
    text-decoration: none;
    font-size: 15px;
    transition: color 0.2s;
}
#toc a:hover {
    color: #1a73e8;
}
@media (max-width: 1200px) {
    #toc { display: none; }
    #wrapper { padding-right: 0; }
}
</style>
</head>
<body>
<div id="wrapper">
    <div id="content">
        <p>要在Ubuntu上设置服务，使得Windows用户可以通过<code>\\IP</code>地址访问共享文件夹，您需要使用Samba服务。Samba是一个免费的软件，提供了符合SMB/CIFS协议的文件和打印服务，使得Linux和Windows系统之间的文件共享成为可能。以下是如何在Ubuntu上安装和配置Samba服务，以及如何创建一个共享文件夹，使Windows用户能够通过<code>\\IP</code>地址访问它的步骤。</p>
<h3 id="samba">安装Samba</h3>
<ol>
<li>
<p>打开Ubuntu终端。</p>
</li>
<li>
<p>更新包列表：</p>
</li>
</ol>
<p><code>sudo apt update</code></p>
<ol>
<li>安装Samba：</li>
</ol>
<p><code>sudo apt install samba</code></p>
<h3 id="_1">配置共享文件夹</h3>
<ol>
<li>创建一个新的文件夹来共享，或选择一个现有的文件夹。例如，创建一个名为<code>shared</code>的文件夹：</li>
</ol>
<p><code>mkdir ~/shared</code></p>
<ol>
<li>分配适当的权限给这个文件夹，确保其他用户可以访问：</li>
</ol>
<p><code>chmod 777 ~/shared</code></p>
<p><strong>注意</strong>：这里使用的<code>777</code>权限很宽松，允许所有用户读写执行。根据您的安全需求，您可能需要使用更严格的权限。</p>
<ol>
<li>编辑Samba配置文件以添加共享文件夹的配置。首先，备份原始配置文件：</li>
</ol>
<p><code>sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.backup</code></p>
<ol>
<li>使用文本编辑器打开配置文件：</li>
</ol>
<p><code>sudo nano /etc/samba/smb.conf</code></p>
<ol>
<li>在文件末尾添加以下内容，以配置共享：</li>
</ol>
<p><code>[SharedFolder]
   path = /home/username/shared
   read only = no
   browsable = yes</code></p>
<p>将<code>/home/username/shared</code>替换为您的共享文件夹的实际路径。</p>
<ol>
<li>保存文件并退出编辑器。</li>
</ol>
<h3 id="samba_1">添加Samba用户</h3>
<ol>
<li>创建一个Samba用户。这个用户需要对应一个系统用户，所以如果您还没有为要共享的目录创建一个系统用户，现在就创建一个。然后，为这个用户创建一个Samba密码：</li>
</ol>
<p><code>sudo smbpasswd -a username</code></p>
<p>将<code>username</code>替换为您的用户名。系统会提示您输入并确认密码。</p>
<ol>
<li>启动Samba服务并设置为开机启动：</li>
</ol>
<p><code>sudo systemctl restart smbd
   sudo systemctl enable smbd</code></p>
<p>在windows下在命令窗口使用以下命令访问     其中SharedFolder是所要共享的文件夹</p>
<pre><code>\\192.168.8.41\SharedFolder   
</code></pre>
<p><img alt="image-20240307210818376" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/zhongke/image-20240307210818376.png" /></p>
<p>如果添加其他文件夹则在 /etc/samba/smb.conf 最后添加其他文件夹</p>
<p>如创建共享文件夹名为software  ，需要共享的路径为/home/username/software</p>
<pre><code>[SharedFolder]
path = /home/username/software
read only = no
browsable = yes
</code></pre>
<p>访问\192.168.8.41 可看到所有文件夹</p>
    </div>
</div>
<div id="toc">
    <div style="font-weight:bold;margin-bottom:12px;">目录</div>
    <div class="toc">
<ul>
<li><a href="#samba">安装Samba</a></li>
<li><a href="#_1">配置共享文件夹</a></li>
<li><a href="#samba_1">添加Samba用户</a></li>
</ul>
</div>

</div>
</body>
</html>
