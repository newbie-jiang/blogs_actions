
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>3.stm32_cmake_for_ubuntu</title>
<style>
body { margin: 0; padding: 0; font-family: sans-serif; background: #f5f5f5; }
#wrapper { max-width: 950px; margin: 0 auto; padding-right: 300px; }
#content {
    background: #fff;
    padding: 40px;
    min-height: 100vh;
    box-shadow: 0 2px 14px #eee;
}
#content img {
    display: block;
    margin: 24px auto;
    max-width: 100%;
    height: auto;
    box-shadow: 0 4px 12px #eee;
    background: #fff;
}
#content pre {
    background: #fafbfc;
    border-radius: 6px;
    padding: 16px;
    margin: 20px 0;
    overflow-x: auto;
    font-size: 16px;
}
#content pre:empty {
    display: none;
}
#content div:empty {
    min-height: 0 !important;
    background: none !important;
}
#toc {
    position: fixed;
    top: 0;
    right: 0;
    width: 270px;
    height: 100vh;
    overflow-y: auto;
    background: #f8f8f8;
    border-left: 1px solid #e0e0e0;
    padding: 32px 16px 32px 24px;
    box-shadow: -3px 0 7px 0 #eee;
    z-index: 100;
}
#toc ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}
#toc ul ul {
    padding-left: 18px;
    border-left: 2px solid #e0e0e0;
    margin-left: 8px;
}
#toc li {
    margin-bottom: 3px;
}
#toc a {
    color: #222;
    text-decoration: none;
    font-size: 15px;
    transition: color 0.2s;
}
#toc a:hover {
    color: #1a73e8;
}
@media (max-width: 1200px) {
    #toc { display: none; }
    #wrapper { padding-right: 0; }
}
</style>
</head>
<body>
<div id="wrapper">
    <div id="content">
        <h1 id="stm32-cmake-for-ubuntu">stm32 cmake for ubuntu</h1>
<p>stm32 cubemx可生成cmake工程，（注意需要较新版本才有）</p>
<p>windwos下编译很慢，推荐linux下编译，这里使用ubuntu编译</p>
<p>安装编译环境</p>
<pre><code>sudo apt update
sudo apt install gcc-arm-none-eabi
sudo apt install cmake
sudo apt install make
</code></pre>
<h2 id="_1">编译测试</h2>
<p>先看下文件</p>
<pre><code>$ tree -L 3
.
|-- CMakeLists.txt
|-- CMakePresets.json
|-- Core
|   |-- Inc
|   |   |-- adc.h
|   |   |-- crc.h
|   |   |-- dma.h
|   |   |-- dma2d.h
|   |   |-- fmc.h
|   |   |-- gpio.h
|   |   |-- i2c.h
|   |   |-- jpeg.h
|   |   |-- jpeg_utils_conf.h
|   |   |-- ltdc.h
|   |   |-- main.h
|   |   |-- memorymap.h
|   |   |-- spi.h
|   |   |-- stm32h7xx_hal_conf.h
|   |   |-- stm32h7xx_it.h
|   |   |-- tim.h
|   |   `-- usart.h
|   `-- Src
|       |-- adc.c
|       |-- crc.c
|       |-- dma.c
|       |-- dma2d.c
|       |-- fmc.c
|       |-- gpio.c
|       |-- i2c.c
|       |-- jpeg.c
|       |-- ltdc.c
|       |-- main.c
|       |-- memorymap.c
|       |-- spi.c
|       |-- stm32h7xx_hal_msp.c
|       |-- stm32h7xx_hal_timebase_tim.c
|       |-- stm32h7xx_it.c
|       |-- syscalls.c
|       |-- sysmem.c
|       |-- system_stm32h7xx.c
|       |-- tim.c
|       `-- usart.c
|-- Drivers
|   |-- CMSIS
|   |   |-- Core
|   |   |-- Core_A
|   |   |-- DSP
|   |   |-- Device
|   |   |-- Include
|   |   |-- LICENSE.txt
|   |   |-- NN
|   |   |-- RTOS
|   |   |-- RTOS2
|   |   `-- docs
|   `-- STM32H7xx_HAL_Driver
|       |-- Inc
|       |-- LICENSE.txt
|       `-- Src
|-- STM32H750XB.ioc
|-- STM32H750XX_FLASH.ld
|-- Utilities
|   `-- JPEG
|       |-- LICENSE.txt
|       |-- jpeg_utils.c
|       |-- jpeg_utils.h
|       `-- jpeg_utils_conf_template.h
|-- cmake
|   |-- gcc-arm-none-eabi.cmake
|   `-- stm32cubemx
|       `-- CMakeLists.txt
`-- startup_stm32h750xx.s

21 directories, 50 files

</code></pre>
<p>命令行编译</p>
<pre><code># 进入工程根目录
cmake -S . -B build -DCMAKE_TOOLCHAIN_FILE=cmake/gcc-arm-none-eabi.cmake
cmake --build build
</code></pre>
<p><img alt="image-20250805152949800" src="https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250805152949800.png" /></p>
    </div>
</div>
<div id="toc">
    <div style="font-weight:bold;margin-bottom:12px;">目录</div>
    <div class="toc">
<ul>
<li><a href="#stm32-cmake-for-ubuntu">stm32 cmake for ubuntu</a><ul>
<li><a href="#_1">编译测试</a></li>
</ul>
</li>
</ul>
</div>

</div>
</body>
</html>
